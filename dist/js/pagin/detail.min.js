require(["config"],function(){require(["jquery","url","GetData","jquery.cookie"],function(t,i,s){function o(){this.body=document.createElement("div"),this.init=function(){return t(this.body).css({width:this.startWidth(),height:this.startHeight(),border:"1px solid #ccc",position:"absolute","z-index":"9",left:this.startLeft()}),t(this.body).appendTo(".detail .content"),this},this.startLeft=function(){return t(".nowpic").position().left+30},this.startWidth=function(){return"400px"},this.startHeight=function(){return"400px"},this.endLeft=function(){return t("#joincar").position().left},this.endTop=function(){return t("#joincar").position().top},this.endWidth=function(){return t("#joincar").outerWidth()},this.endHeight=function(){return t("#joincar").outerHeight()},this.start=function(){$this=t(this.body),t(this.body).animate({left:this.endLeft(),top:this.endTop(),width:this.endWidth(),height:this.endHeight()},1e3,function(){$this.hide()})}}var e=i.param("goodid");s.getDataById("json/goods.json","dimond_id",e,function(i){$sImg.find("img").prop("src",i.src),$bImg.prop("src",i.src);var o=t.cookie("history"),e=[];if(o){e=o.split(",");var n=!1;for(var r in e)if(e[r]==i.dimond_id){n=!0;break}n||(e.length>10&&e.shift(),e.push(i.dimond_id),n=!1)}else e.push(i.dimond_id);t.cookie("history",e.join(),{path:"/",expires:7});for(var r in e)s.getDataById("json/goods.json","dimond_id",e[r],function(i){t(".history .history_list").prepend("<dl><dt><a href='detail.html?goodid="+i.dimond_id+"'><img src='"+i.src+"'/></a></dt><dd><a href='detail.html?goodid='"+i.dimond_id+">"+i.series+" "+i.style+" "+i.match+" </a></dd><dd>ï¿¥"+i.price+"</dd></dl>")})}),$sImg=t(".sImg"),t("#joincar").click(function(){var i=((new o).init().start(),t.cookie("shoppingcar")?t.cookie("shoppingcar").split(","):[]);if(i.length){var s=!1;for(var n in i)if(i[n]==e){s=!0;break}s||i.push(e)}else i.push(e);t.cookie("shoppingcar",i.join(),{expires:7,path:"/"})}),$bImg=t(".bigImg"),$sCursor=t(".cursor"),$bCursor=t(".bigpic");var n=$sImg.width()*$bCursor.width()/$bImg.width(),r=$sImg.height()*$bCursor.height()/$bImg.height(),c=$bImg.width()/$sImg.width();$sImg.hover(function(){$sCursor.width(n),$sCursor.height(r),$bCursor.show(),$sCursor.show()},function(){$bCursor.hide(),$sCursor.hide()}),$sImg.mousemove(function(t){var i=t.pageX-$sImg.offset().left,s=t.pageY-$sImg.offset().top;$sCursor.css({left:Math.min($sImg.width()-n,Math.max(0,i-n/2)),top:Math.min($sImg.height()-r,Math.max(0,s-r/2))}),$bImg.css({left:-$sCursor.position().left*c,top:-$sCursor.position().top*c})}),t(".productList ul li").click(function(i){t(this).addClass("currentPic").siblings().removeClass("currentPic");var s=t(this).find("img").prop("src");$sImg.find("img").prop("src",s),$bImg.prop("src",s)}),t(".match li").click(function(){t(this).addClass("chose").siblings().removeClass("chose")}),t(".msgList li").click(function(){function i(){this.getList=function(i){t.ajax({url:"http://comment.secoo.com/comment/comment.jsp?process=7&pageSize=8&isImg=0&productId=11077616&productBrandId=24&productCategoryId=185",async:!0,dataType:"jsonp",jsonp:"callback",data:{currPage:i?i:1},success:function(i){var s=i.data.productCommentList;for(var o in s){var e=new Date(s[o].createDate);t(".tab2").append("<div class='commentlist'><p class='left'>"+s[o].content+"</p><p class='right'><span>"+s[o].userName+"</span><span>"+ +e.getFullYear()+"/"+e.getMonth()+"/"+e.getDate()+"</span></p></div>")}}})}}switch(t(this).addClass("curTab").siblings().removeClass("curTab"),t(".tab_content").hide().eq(t(this).index()).show(),t(this).index()){case 1:(new i).getList();break;case 3:}});var d=t(".msgList").position().top;window.onscroll=function(){var i=document.documentElement.scrollTop||document.body.scrollTop;i>d?t(".msgList").css({top:0,position:"fixed",background:"#fff"}):t(".msgList").css({position:"static",background:""})}})});